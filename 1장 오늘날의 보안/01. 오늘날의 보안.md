# 1장 오늘날의 보안

현재는 보안의 중요성을 인식하는 개발자들이 점차 증가하고 있다. <br/>
그러나 아쉽게도 소프트웨어 애플리케이션을 개발하는 초기부터 보안을 신중하게 고려하는 것은 아직 일반적인 관행은 아니다.<br/>
이러한 태도는 바뀌어야 하며 **소프트웨어 시스템의 개발에 관여하는 모든 사람들이 처음부터 보안을 고려해야 한다.** <br/>

성능, 확장성, 가용성, 보안과 같은 소프트웨어의 비기능적 특징은 시간이 지남에 따라 단기적 영향과 장기적 영향을 미칠 수 있다.<br/>
초기에 이러한 특징을 고려하지 않으면 애플리케이션 사용자의 수익성에도 중대한 영향이 발생할 수 있다.<br/>
또한 이러한 고려 사항을 무시하면 DDoS(분산 서비스 거부) 공격에 원치 않게 참여하는 등 다른 시스템 오류도 발생할 수 있다.<br/>
비기능적 요구 사항의 숨겨진 측면(누락되거나 숨겨진 것을 찾기 어려움) 때문에 이러한 문제는 더 위험하다.<br/>

소프트웨어 시스템을 다룰 때는 여러 비기능적 측면을 고려해야한다.<br/>
이러한 비기능적 측면도 모두 중요하며 소프트웨어 개발 프로세스에서 책임감 있게 다뤄야 한다.<br/>

## 1-1. 스프링 시큐리티: 개념과 장점

**스프링시큐리티** : 스프링 애플리케이션에 보안을 적용하는 과정을 크게 간소화하는 프레임워크

- 애플리케이션 보안의 가장 중요한 측면을 더 적은 코드로 수행할 수 있도록 하여 스프링 프레임워크를 완성한다.
- 상용구 코드를 작성하거나 앱 간에 같은 논리를 반복해서 작성할 필요가 없도록 사전 정의된 기능을 제공한다.
- 모든 구성 요소를 구성할 수 있으므로 유연성이 매우 높다.<br/>

## 1-2. 소프트웨어 보안이란?

애플리케이션은 민감한 정보에 **접근, 변경 또는 가로챌 기회가 없게 해야 하며** 의도된 사용자 이외의 대상은 어떤 식으로든 데이터와 상호작용할 수 없게 해야한다.<br/>
이것이 광범위하게 표현한 보안의 의미이다.<br/>

스프링 시큐리티는 애플리케이션 수준에 속하는 프레임워크다.<br/>

**애플리케이션 수준 보안** : 애플리케이션이 실행되는 환경과 애플리케이션이 처리하고 저장하는 데이터를 보호하기 위해 해야 하는 모든 것<br/>

## 1-3. 보안이 중요한 이유는 무엇인가?

보안에 충분한 주의를 기울이지 않으면 결국 원치 않은 대가를 치뤄야 할 수 있다.<br/>
이러한 대가는 보통 금전적 비용이지만 수익성 손실을 초래하는 여러 형태로 나타나기도 한다.<br/>
은행 계좌에서 돈을 잃거나 서비스가 무단으로 이용되는 것만이 아니라 실제 비용이 발생할 수 있다.<br/>
브랜드와 회사의 이미지는 중요하며 손상된 이미지를 회복하는 비용이 시스템의 취약성 때문에 생긴 손해보다 더 클 수 있다.<br/>

## 1-4. 웹 애플리케이션의 일반적인 보안 취약성

### 인증과 권한 부여의 취약성

인증 취약성이 있다는 것은 사용자가 악의를 가지고 다른 사람의 기능이나 데이터에 접근할 수 있다는 의미다.<br/>
스프링 시큐리티와 같은 프레임워크로 이러한 취약성이 발생할 우려를 줄일 수 있지만, 올바르게 이용하지 않으면 여전히 위험성은 있다.<br/>
예를 들어 스프링 시큐리티를 이용해 특정 역할이 있는 인증된 사용자만 특정 엔드포인트에 접근하도록 정의할 수 있다.<br/>
하지만 데이터 수준에 제한이 없으면 다른 사용자의 데이터를 이용할 수 있는 허점이 생길 수 있다.

### 세션 고정(Session fixation) 취약성

웹 애플리케이션이 인증 프로세스 중에 고유한 세션 ID를 할당하지 않아 기존 세션 ID가 재사용될 가능성이 있을 때 발생한다.<br/>
공격자는 웹 애플리케이션이 구현된 방식에 따라 다양한 방법으로 이 취약성을 이용할 수 있다.<br/>
예를 들어 애플리케이션이 세션 ID를 URL에 넣는 경우 공격자는 피해자가 악성 링크를 클릭하도록 유인할 수 있다.<br/>
애플리케이션이 숨겨진 특성을 이용하는 경우 공격자는 피해자를 속여 외래 양식을 이용하도록 하고 작업을 서버로 게시할 수 있다.<br/>
애플리케이션이 세션 값을 쿠키에 저장하는 경우 공격자는 스크립트를 주입해 피해자의 브라우저가 스크립트를 실행하도록 할 수 있다.

### XSS(교차 사이트 스크립팅)

**XSS(교차 사이트 스크립팅)** 는 서버에 노출된 웹 사이트로 클라이언트 쪽 스크립트를 주입해 다른 사용자가 이를 사용하도록 하는 공격이다.<br/>
이 취약성이 악용되면 계정 가장(세션 고정과 결합)이나 DDoS와 같은 분산 공격 참여 등의 결과가 발생할 수 있다.

### CSRF(사이트 간 요청 위조)

CSRF를 통해 동작을 숨겨서 사용자가 서버에서 원치 않은 동작을 실행하도록 할 수 있다.<br/>
일반적으로 공격자는 CSRF를 이용해 시스템의 데이터를 변경하는 동작을 실행한다.

### 웹 애플리케이션의 주입 취약성

주입은 피해 시스템의 데이터 변경, 삭제, 무단 이용을 유발하는 중요한 취약성 유형이다.<br/>
주입 공격에는 여러 가지 유형이 있으며 XSS도 주입 취약성의 하나로 볼 수 있다.<br/>
주입 공격은 시스템에 피해를 가할 목적의 클라이언트 쪽 스크립트를 주입한다.<br/>
다른 예로는 SQL 주입, XPath 주입, OS 명령 주입, LDAP 주입 등 여러 가지가 있다.<br/>

### 민감한 데이터의 노출 처리

기밀 데이터 공개는 복잡성 측면에서 가장 기초적이고 단순한 취약성 같지만, 여전히 흔한 실수 중 하나로 남아 있다.<br/>
공개 정보가 아닌 것은 절대 로그에 기록하지 말아야 한다.<br/>
개인 키나 인증서는 이러한 공개 정보가 아니므로 오류, 경고, 정보 메시지와 함께 로그에 기록하지 말아야 한다.

### 메서드 접근 제어 부족

애플리케이션 수준에도 한 계층에만 권한 부여를 적용하면 안된다.<br/>
때에 따라서는 특정 기능을 아예 홏루할 수 없게 해야한다.<br/>
(예: 현재 인증된 사용자의 이용 권리에 허용되지 않은 경우)<br/>

### 알려진 취약성이 있는 종속성 사용

때로는 개발하는 애플리케이션이 아니라 기능을 만들기 위해 이용하는 라이브러리나 프레임워크 같은 종속성에 취약성이 있을 수 있다.<br/>
이용하는 종속성을 항상 주의 깊게 살펴보고 알려진 취약성이 있는 버전은 제거해야 한다<br/>